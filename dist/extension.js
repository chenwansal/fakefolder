(()=>{"use strict";var e={681:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppState=void 0,t.AppState=class{}},344:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RENode=void 0,t.RENode=class{constructor(e,t,o,i,r){this.id=e,this.name=t,this.isFolder=o,this.truePath=i,this.parentID=r,this.childrenFolder=[],this.childrenFile=[]}RemoveChild(e){this._RemoveChild(this.childrenFolder,e),this._RemoveChild(this.childrenFile,e)}_RemoveChild(e,t){let o=e.findIndex((e=>e==t));-1!=o&&e.slice(o,1)}}},554:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandHelper=void 0,t.CommandHelper=class{static GetFullCommand(e){return"fakefolder."+e}}},969:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaveService=void 0;const i=o(344),r=o(147);class n{constructor(e){this.jsonPath=e,this.all=[],this.all.push(this.CreateRoot()),null==n.Instance&&(n.Instance=this)}CreateRoot(){return new i.RENode(0,"root",!0,"",-1)}GetCount(){return this.all.length}Travel(e){this.all.forEach(e)}AddNode(e){this.all.push(e),this.SaveAll(),console.log(this.all.length)}RootNode(){return this.all[0]}RemoveNode(e){let t=this.all,o=t.findIndex((t=>t.id==e));if(-1!=o){t.splice(o,1);for(let o=0;o<t.length;o+=1)t[o].RemoveChild(e)}}FindNode(e){return this.all.find((t=>t.id==e))}FindNodeWithDir(e){return this.all.find((t=>t.isFolder&&t.name==e))}GetFolderNode(){return this.all.filter((e=>e.isFolder))}LoadAll(){let e=this.jsonPath;if(!r.existsSync(e))return void console.log("NO FILTER");let t=r.readFileSync(e,{encoding:"utf8"});try{this.all=JSON.parse(t),0==this.all.length&&(this.all.push(this.CreateRoot()),this.SaveAll())}catch{this.SaveAll()}}SaveAll(){let e=this.jsonPath,t=JSON.stringify(this.all);r.writeFileSync(e,t,{encoding:"utf-8"})}}t.SaveService=n},827:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandSystem=void 0;const i=o(496),r=o(681),n=o(344),l=o(554),s=o(969),d=o(862),a=o(759),c=o(17);function h(e){let t=[];return e.GetFolderNode().forEach((e=>{t.push(new a.QuickPickItemElement(e.name))})),t}t.CommandSystem=class{static Init(e){this.RegisterCreateFolder(e),this.RegisterPutFileToFolder(e)}static RegisterCreateFolder(e){i.commands.registerCommand(l.CommandHelper.GetFullCommand("create-fake-folder"),(()=>{let e=s.SaveService.Instance,t=new d.QuickPickWindow,o="";t.OnConfirmHandle=t=>{o=t;let i=new d.QuickPickWindow;i.OnConfirmHandle=t=>{let i=e.FindNodeWithDir(t);if(i){{let t=new n.RENode(e.GetCount(),o,!0,"",i.id);i.childrenFolder.push(t.id),e.AddNode(t)}r.AppState.re.TriggerTreeChange()}else{let t=new n.RENode(e.GetCount(),o,!0,"",-1);e.AddNode(t)}},i.Open("Create FakeFolder(2/2)","Input Parent Folder Name",!0,h(e))},t.Open("Create FakeFolder(1/2)","Input Folder Name",!1,[])}))}static RegisterPutFileToFolder(e){i.commands.registerCommand(l.CommandHelper.GetFullCommand("put-file-to-fake-folder"),(()=>{if(r.AppState.curTextDocu){let e=r.AppState.curTextDocu.fileName,t=s.SaveService.Instance,o=new d.QuickPickWindow;o.OnConfirmHandle=o=>{let i=t.FindNodeWithDir(o);if(!i)return;let l=new n.RENode(t.GetCount(),c.basename(e),!1,e,i.id);i.childrenFile.push(l.id),t.AddNode(l),r.AppState.re.TriggerTreeChange()},o.Open("Put Current File To FakeFolder","Select Target Folder",!0,h(t))}else console.log("未选中")}))}}},759:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QuickPickItemElement=void 0,t.QuickPickItemElement=class{constructor(e){this.label=e}}},862:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QuickPickWindow=void 0;const i=o(496);t.QuickPickWindow=class{constructor(){this.inputValue="",this.OnConfirmHandle=()=>{}}Open(e,t,o,r){let n=i.window.createQuickPick();n.title=e,n.items=r,n.placeholder=t,n.busy=!0,n.show(),n.onDidChangeValue((e=>{this.inputValue=e})),n.onDidAccept((()=>{n.busy=!1,n.hide(),o||this.OnConfirmHandle(this.inputValue)})),n.onDidChangeSelection((e=>{if(o&&e&&e.length>0){let t=e[0];this.OnConfirmHandle(t.label)}}))}}},496:e=>{e.exports=require("vscode")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},t={};function o(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,o),n.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=e.REElement=e.REDataProvider=void 0;const t=o(496),r=o(147),n=o(969),l=o(17),s=o(827),d=o(681),a=t.workspace.workspaceFolders&&t.workspace.workspaceFolders.length>0?t.workspace.workspaceFolders[0].uri.fsPath:void 0;let c="";class h{constructor(e){this._onDidChangeTreeData=new t.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.curNode=e.RootNode(),console.log(this.curNode),this.curElement=new u(this.curNode)}getTreeItem(e){return e}getChildren(e){if(!e||!e.node)return console.log("GET ROOT CHILDREN"),Promise.resolve([this.curElement]);let o=[],i=e.node,r=n.SaveService.Instance;if(i.isFolder){for(let e=0;e<i.childrenFolder.length;e+=1){let t=i.childrenFolder[e],n=r.FindNode(t);n&&o.push(new u(n))}for(let e=0;e<i.childrenFile.length;e+=1){let n=i.childrenFile[e],l=r.FindNode(n);l&&o.push(new u(l,t.TreeItemCollapsibleState.None))}}return console.log("GET CHILD CHILDREN"),Promise.resolve(o)}TriggerTreeChange(){this._onDidChangeTreeData&&this._onDidChangeTreeData.fire(),console.log("FIRE")}resolveTreeItem(e,o,i){return o&&o.node?(o.node.isFolder||this.TriggerTreeChange(),d.AppState.treeview.selection.find((e=>e==o))?(async function(e){if(c==e)return;c=e;let o=await t.workspace.openTextDocument(e);t.window.showTextDocument(o)}(o.node.truePath),Promise.resolve(o)):Promise.resolve(o)):Promise.resolve(e)}}e.REDataProvider=h;class u extends t.TreeItem{constructor(e,o=t.TreeItemCollapsibleState.Collapsed){super(e.name,o),this.node=e}}e.REElement=u,e.activate=function(e){t.window.onDidChangeActiveTextEditor((e=>{let t=e?.document;t&&(d.AppState.curTextDocu=t)})),s.CommandSystem.Init(e);let o=a?l.join(a,"refilter.json"):"";if(!r.existsSync(o))return i="Not Found: "+o,void t.window.showInformationMessage(i);var i;let c=new n.SaveService(o);c.LoadAll(),console.log("(1/2)Resource Folder Loaded Nodes...");let u=new h(c),m=(t.window.registerTreeDataProvider("RETreeview",u),t.window.createTreeView("RETreeview",{treeDataProvider:u}));d.AppState.re=u,d.AppState.treeview=m,a?console.log("(2/2)Resource Folder Rendered Treeview..."):console.log("no workspace")},e.deactivate=function(){}})(),module.exports=i})();